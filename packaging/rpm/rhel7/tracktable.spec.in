Summary:          Tracktable C++ trajectory analysis and rendering library
Name:             tracktable
Version:          @TRACKTABLE_VERSION@
Release:          @RPM_RELEASE@%{?dist}
License:          Other
URL:              https://tracktable.sandia.gov/
Group:            System Environment/Libraries
Source:           Tracktable-@TRACKTABLE_VERSION@-Source.tar.bz2
Vendor:           National Technology and Engineering Solutions of Sandia, LLC
BuildRoot:        %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
BuildRequires:    boost169-devel >= 1.69
BuildRequires:    cmake3 >= 3.12
BuildRequires:    pkgconfig

%description
Tracktable is a C++ trajectory and analysis library.

%package          devel
Summary:          C++ Headers for developing programs that will use the tracktable library
Group:            Development/Libraries
Requires:         tracktable = %{version}-%{release}
Requires:         boost169-devel >= 1.69
Requires:         pkgconfig

%description    devel
C++ libraries and header files needed for developing applications that
will use the tracktable library.

%package          doc
Summary:          Developer's documentation for the tracktable library
Group:            Documentation
Requires:         gtk-doc
Requires:         devhelp
BuildArch:        noarch

%description      doc
This package contains developer's documentation for the tracktable library.

%prep
%setup -q -n Tracktable-@TRACKTABLE_VERSION@-Source

%build
%cmake3 \
    -DBOOST_INCLUDEDIR=/usr/include/boost169/ \
    -DBOOST_LIBRARYDIR=/usr/lib64/boost169 \
    -DBUILD_EXAMPLES=OFF \
    -DBUILD_PYTHON_WRAPPING=OFF \
    -DBUILD_TESTING=OFF \
    -DCMAKE_INSTALL_LIBDIR:PATH=%{_libdir} \
    .
    
%make_build %{?_smp_mflags}

%install
%make_install

%check
ctest3 -V %{?_smp_mflags}

%clean
%{__rm} -rf %{buildroot}

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files
%defattr(-,root,root,-)
%{_libdir}/libTracktable*.so.*
%{_docdir}/LICENSE.txt
%{_docdir}/README.md

%files devel
%defattr(-,root,root,-)
%{_libdir}/libTracktable*.so
%{_libdir}/pkgconfig/@PKGCONFIG_FILE@
%{_includedir}/@TRACKTABLE_INCLUDEDIR@
%{_docdir}/LICENSE.txt
%{_docdir}/README.md

%files doc
%defattr(-,root,root,-)
%{_docdir}/LICENSE.txt
%{_docdir}/README.md
#%doc %{_datadir}/doc/html/tracktable/

%changelog

* Mon Jan 20 2020 Rick L Vinyard Jr <rlvinya@sandia.gov> - 1.2.2-1
- Initial version

